(function(){var e={}.hasOwnProperty,t=function(t,n){function i(){this.constructor=t}for(var r in n)e.call(n,r)&&(t[r]=n[r]);return i.prototype=n.prototype,t.prototype=new i,t.__super__=n.prototype,t};define(["jquery","underscore","backbone","collections/contatos","text!templates/contatos/index.html","text!templates/contatos/index-item.html"],function(e,n,r,i,s,o){var u,a;return u=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.tagName="tr",r.prototype.isSelected=!1,r.prototype.template=n.template(o),r.prototype.events={"click td":"select"},r.prototype.render=function(){return this.$el.html(this.template({contato:this.model.toJSON(),emails:this.model.emails.toJSON(),enderecos:this.model.enderecos.toJSON(),telefones:this.model.telefones.formatFromRaw()})),this.input=this.$("input"),this},r.prototype.toggleSelection=function(e){return e==null&&(e=!this.isSelected),this.input.prop("checked",this.isSelected=!this.isSelected),this.$el.toggleClass("selected",this.isSelected),this.isSelected?this.trigger("selected",this):this.trigger("unselected",this),this.trigger("change:selection",this)},r.prototype.select=function(){return this.toggleSelection(!0)},r.prototype.unselect=function(){return this.toggleSelection(!1)},r}(r.View),a=function(e){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,e),r.prototype.template=n.template(s),r.prototype.initialize=function(e){return r.__super__.initialize.call(this,e),this.collections==null&&(this.collection=new i([])),this.selected={},this.collection.on("add",this.addOne,this),this.collection.on("reset",this.addAll,this),this.collection.on("all",this.render,this),this.collection.fetch()},r.prototype.getSelected=function(){return this.selected},r.prototype.addOne=function(e){var t,n=this;return t=new u({model:e}),t.on("selected",function(e){return n.selected[e.model.id]=e}),t.on("unselected",function(e){return delete n.selected[e.model.id]}),this.$(".contatos").append(t.render().el)},r.prototype.addAll=function(){return this.collection.each(this.addOne,this)},r.prototype.render=function(){return this.$el.html(this.template()),this.addAll(),this},r}(r.View)})}).call(this);